<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Cloud-native AI workflows - BigQuery ML Vertex AI for cloud-native AI pipelines - Vitthal Mirji</title><link rel=icon type=image/png href=favicon.ico><meta name=viewport content="width=device-width,initial-scale=1"><meta itemprop=name content="Cloud-native AI workflows - BigQuery ML Vertex AI for cloud-native AI pipelines"><meta itemprop=description content="How to build end-to-end AI workflows using BigQuery ML, Vertex AI, pipelines, feature store, real-time inference, monitoring & MLOps"><meta itemprop=datePublished content="2025-05-17T00:00:00+00:00"><meta itemprop=dateModified content="2025-05-17T00:00:00+00:00"><meta itemprop=wordCount content="783"><meta itemprop=keywords content="Cloud-Native,AI Workflows,Vertex AI,BigQuery ML,Real-Time Inference,MLOps,Feature Store,Monitoring,Pipelines,Batch Prediction,Model Registry,Data Engineering,SQL-First,Cloud-Native AI"><meta property="og:url" content="https://vitthalmirji.com/2025/05/cloud-native-ai-workflows-bigquery-ml-vertex-ai-for-cloud-native-ai-pipelines/"><meta property="og:site_name" content="Vitthal Mirji"><meta property="og:title" content="Cloud-native AI workflows - BigQuery ML Vertex AI for cloud-native AI pipelines"><meta property="og:description" content="How to build end-to-end AI workflows using BigQuery ML, Vertex AI, pipelines, feature store, real-time inference, monitoring & MLOps"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-05-17T00:00:00+00:00"><meta property="article:modified_time" content="2025-05-17T00:00:00+00:00"><meta property="article:tag" content="Cloud-Native"><meta property="article:tag" content="AI Workflows"><meta property="article:tag" content="Vertex AI"><meta property="article:tag" content="BigQuery ML"><meta property="article:tag" content="Real-Time Inference"><meta property="article:tag" content="MLOps"><meta name=twitter:card content="summary"><meta name=twitter:title content="Cloud-native AI workflows - BigQuery ML Vertex AI for cloud-native AI pipelines"><meta name=twitter:description content="How to build end-to-end AI workflows using BigQuery ML, Vertex AI, pipelines, feature store, real-time inference, monitoring & MLOps"><link rel=stylesheet type=text/css media=screen href=https://vitthalmirji.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://vitthalmirji.com/css/main.css><link rel=stylesheet type=text/css href=https://vitthalmirji.com/[css/override.css]><link id=dark-scheme rel=stylesheet type=text/css href=https://vitthalmirji.com/css/dark.css><script src=https://vitthalmirji.com/js/feather.min.js></script><script src=https://vitthalmirji.com/js/main.js></script></head><body><div class="container-wide wrapper"><link rel=icon href=../../../favicon.ico sizes=any><link rel=icon type=image/png href=../../../favicon.png><link rel=apple-touch-icon href=../../../apple-touch-icon.png><link rel=manifest href=../../../site.webmanifest><meta name=theme-color content="#ffffff"><link rel=stylesheet href=../../../syntax.css><div class=header><h1 class=site-title><a href=https://vitthalmirji.com/>Vitthal Mirji</a></h1><div class=site-description><p>Software Engineering, Data Engineering, GNU/Linux, Data, ML, and other things</p><nav class="nav social"><ul class=flat><li><a href=https://github.com/vim89/ title=Github><i data-feather=github></i></a></li><li><a href=https://twitter.com/whoami_vim/ title=Twitter><i data-feather=twitter></i></a></li><li><a href=https://www.linkedin.com/in/vitthal10/ title=LinkedIn><i data-feather=linkedin></i></a></li><li><a href=../../../index.xml title=RSS><i data-feather=rss></i></a></li><span class=scheme-toggle><a href=# id=scheme-toggle></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=../../../>Home</a></li><li><a href=../../../about>About</a></li><li><a href=../../../tags>Tags & Stats</a></li></ul></nav></div><div class=article-nav id=article-nav-id><div class=post><div class=post-header><div class=meta><div class=date><span class=day>17</span>
<span class=rest>May 2025</span></div></div><div class=matter><h1 class=title>Cloud-native AI workflows - BigQuery ML Vertex AI for cloud-native AI pipelines</h1></div></div><aside class=toc id=static-toc><header><h3>Contents</h3></header><nav id=TableOfContents><ol><li><a href=#-why-cloud-native-ai-workflows-matter>ğŸš€ Why cloud-native ai workflows matter</a></li><li><a href=#-end-to-end-architecture>ğŸ§© end-to-end architecture</a></li><li><a href=#-step-1--sql-first-feature-engineering-in-bigquery>ğŸ§¼ step 1 â€“ sql-first feature engineering in bigquery</a></li><li><a href=#-step-2--model-training-entirely-in-data-warehouse>ğŸ¯ step 2 â€“ model training entirely in data warehouse</a></li><li><a href=#-step-3--register--deploy-with-vertex-ai>ğŸ§  step 3 â€“ register & deploy with vertex ai</a></li><li><a href=#-step-4--real-time-inference-api>âš¡ step 4 â€“ real-time inference api</a></li><li><a href=#-step-5--batch-predictions--retraining-pipelines>ğŸ” step 5 â€“ batch predictions + retraining pipelines</a></li><li><a href=#-step-6--feature-store-sync>ğŸ§° step 6 â€“ feature store sync</a></li><li><a href=#-step-7--monitoring--drift-detection>ğŸ“ˆ step 7 â€“ monitoring & drift detection</a></li><li><a href=#-step-8--continuous-retraining>ğŸ”„ step 8 â€“ continuous retraining</a></li><li><a href=#-pro-tips--gotchas>ğŸ’¡ pro tips & gotchas</a></li><li><a href=#-business-impact-snapshot>ğŸ’¼ business impact snapshot</a></li><li><a href=#-future-directions>ğŸ§  future directions</a></li></ol></nav></aside><h2 id=-why-cloud-native-ai-workflows-matter>ğŸš€ Why cloud-native ai workflows matter</h2><p>Gone are the days when ML meant â€œexport to CSV, train locally, drop results into spreadsheet.â€
Today, you want models closer to data, less friction, and faster iteration. Thatâ€™s where <strong>BigQuery ML + Vertex AI</strong> shineâ€”no data movement, built-in MLOps, SQL-first modeling, Python API for custom steps, and powerful pipelines to tie it all together.</p><p>This post walks through:</p><ul><li>bigquery data prep + bqml modeling</li><li>registering models in vertex ai model registry</li><li>deploying real-time endpoints</li><li>building automated pipelines</li><li>monitoring and feature store integration</li></ul><hr><h2 id=-end-to-end-architecture>ğŸ§© end-to-end architecture</h2><p>Hereâ€™s the full picture:</p><pre class=mermaid>
  graph TD
A[BigQuery raw tables] --&gt; B[Feature engineering via SQL]
B --&gt; C[BigQuery ML model training]
C --&gt; D[Vertex AI Model Registry]
D --&gt; E[Deployed endpoint for real-time inference]
D --&gt; F[Vertex AI Batch Prediction]
C --&gt; G[Vertex AI Pipeline orchestration]
E --&gt; H[API client/app]
G --&gt; I[Cloud Monitoring + Drift Detection]
</pre><p>This is 2025: donâ€™t ETL into CSV. Train <strong>in-place</strong>. Thatâ€™s rightâ€”your models live where your data lives.</p><hr><h2 id=-step-1--sql-first-feature-engineering-in-bigquery>ğŸ§¼ step 1 â€“ sql-first feature engineering in bigquery</h2><p>We avoid data duplication by building features using SQL:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=k>REPLACE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>ml_features</span><span class=p>.</span><span class=n>product_monthly</span><span class=w> </span><span class=k>AS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>product_id</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>EXTRACT</span><span class=p>(</span><span class=k>YEAR</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>order_date</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>year</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>EXTRACT</span><span class=p>(</span><span class=k>MONTH</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>order_date</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=k>month</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>orders</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>SUM</span><span class=p>(</span><span class=n>quantity</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>total_qty</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>AVG</span><span class=p>(</span><span class=n>price</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>avg_price</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>COUNT</span><span class=p>(</span><span class=k>DISTINCT</span><span class=w> </span><span class=n>customer_id</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>unique_customers</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>EXTRACT</span><span class=p>(</span><span class=n>DATE_DIFF</span><span class=p>(</span><span class=k>CURRENT_DATE</span><span class=p>(),</span><span class=w> </span><span class=k>MAX</span><span class=p>(</span><span class=n>order_date</span><span class=p>),</span><span class=w> </span><span class=k>DAY</span><span class=p>))</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>recency_days</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>sales</span><span class=p>.</span><span class=n>orders</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>no python, no pandas</li><li>eatable, version-controlled</li><li>incremental rebuilds by partition</li></ul><h2 id=-step-2--model-training-entirely-in-data-warehouse>ğŸ¯ step 2 â€“ model training entirely in data warehouse</h2><p>BigQuery ML supports:</p><ul><li>linear/logistic regression</li><li>XGBoost</li><li>autoML (deep neural nets)</li><li>time series (ARIMA_PLUS)</li><li>feature engineering with SQL</li></ul><p>Example â€“ train product demand model with XGB:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=k>REPLACE</span><span class=w> </span><span class=n>MODEL</span><span class=w> </span><span class=n>project</span><span class=p>.</span><span class=n>dataset</span><span class=p>.</span><span class=n>product_demand_xgb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>OPTIONS</span><span class=p>(</span><span class=n>model_type</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;BOOSTED_TREE_REGRESSOR&#39;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>input_label_cols</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;total_qty&#39;</span><span class=p>])</span><span class=w> </span><span class=k>AS</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>total_qty</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>avg_price</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>unique_customers</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>recency_days</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>SAFE_CAST</span><span class=p>(</span><span class=k>month</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>STRING</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>month_str</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>ml_features</span><span class=p>.</span><span class=n>product_monthly</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=k>year</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=mi>2024</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Training is serverless-just SQL. No cluster config, no python, just elastic compute under the hood.</p><h2 id=-step-3--register--deploy-with-vertex-ai>ğŸ§  step 3 â€“ register & deploy with vertex ai</h2><p>BigQuery ML can export models to Vertex AI registry with one statement:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>EXPORT</span><span class=w> </span><span class=n>MODEL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>project</span><span class=p>.</span><span class=n>dataset</span><span class=p>.</span><span class=n>product_demand_xgb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>OPTIONS</span><span class=p>(</span><span class=n>uri</span><span class=o>=</span><span class=s1>&#39;gs://my-model-bucket/xgb_export&#39;</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Then deploy via gcloud or Python:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gcloud ai models upload <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --region<span class=o>=</span>us-central1 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --display-name<span class=o>=</span>product-demand-xgb <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --artifact-uri<span class=o>=</span>gs://my-model-bucket/xgb_export
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>gcloud ai endpoints create --region<span class=o>=</span>us-central1 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --display-name<span class=o>=</span>prod-demand-endpoint
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>gcloud ai endpoints deploy-model <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  ENDPOINT_ID --model<span class=o>=</span>MODEL_ID --traffic-split<span class=o>=</span><span class=nv>0</span><span class=o>=</span><span class=m>100</span>
</span></span></code></pre></td></tr></table></div></div><p>You now have a real-time HTTP endpoint.</p><h2 id=-step-4--real-time-inference-api>âš¡ step 4 â€“ real-time inference api</h2><p>Say you need live predictions from an order microservice:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>google.cloud</span> <span class=kn>import</span> <span class=n>aiplatform</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>endpoint</span> <span class=o>=</span> <span class=n>aiplatform</span><span class=o>.</span><span class=n>Endpoint</span><span class=p>(</span><span class=n>endpoint_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=n>endpoint</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=n>instances</span><span class=o>=</span><span class=p>[</span>
</span></span><span class=line><span class=cl>   <span class=p>{</span><span class=s2>&#34;avg_price&#34;</span><span class=p>:</span><span class=mi>125</span><span class=p>,</span><span class=s2>&#34;unique_customers&#34;</span><span class=p>:</span><span class=mi>12</span><span class=p>,</span><span class=s2>&#34;recency_days&#34;</span><span class=p>:</span><span class=mi>3</span><span class=p>,</span><span class=s2>&#34;month_str&#34;</span><span class=p>:</span><span class=s2>&#34;7&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>])</span>
</span></span></code></pre></td></tr></table></div></div><p>Works in &lt;200â€¯ms, perfectly scalable.</p><h2 id=-step-5--batch-predictions--retraining-pipelines>ğŸ” step 5 â€“ batch predictions + retraining pipelines</h2><p>Build scheduled pipelines using Vertex AI Pipelines + Kubeflow SDK:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>kfp.v2</span> <span class=kn>import</span> <span class=n>dsl</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>google_cloud_pipeline_components</span> <span class=kn>import</span> <span class=n>bqml</span><span class=p>,</span> <span class=n>aiplatform</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dsl.pipeline</span><span class=p>(</span><span class=o>...</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>pipeline</span><span class=p>(</span><span class=n>project</span><span class=p>,</span> <span class=n>dataset</span><span class=p>,</span> <span class=n>table</span><span class=p>,</span> <span class=n>region</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=n>features</span> <span class=o>=</span> <span class=n>bqml</span><span class=o>.</span><span class=n>Train</span><span class=p>(</span><span class=o>...</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>model</span> <span class=o>=</span> <span class=n>bqml</span><span class=o>.</span><span class=n>Evaluate</span><span class=p>(</span><span class=o>...</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>export</span> <span class=o>=</span> <span class=n>bqml</span><span class=o>.</span><span class=n>ExtractEvaluation</span><span class=p>(</span><span class=o>...</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>managed_model</span> <span class=o>=</span> <span class=n>aiplatform</span><span class=o>.</span><span class=n>BigQueryToVertexAIModel</span><span class=p>(</span><span class=n>project</span><span class=o>=</span><span class=n>project</span><span class=p>,</span> <span class=o>...</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>aiplatform</span><span class=o>.</span><span class=n>EndpointCreateDeployOp</span><span class=p>(</span><span class=o>...</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>This triggers training, evaluation, deployment automatically. Drag-and-drop production.</p><h2 id=-step-6--feature-store-sync>ğŸ§° step 6 â€“ feature store sync</h2><p>Vertex AI Feature Store auto-syncs BigQuery features:</p><ul><li>tables simply turn into feature sets</li><li>online, low-latency access</li><li>feature lineage and drift tracking out of the box</li></ul><p>Great for consistent real-time inference and monitoring.</p><h2 id=-step-7--monitoring--drift-detection>ğŸ“ˆ step 7 â€“ monitoring & drift detection</h2><p>Vertex AI offers:</p><ul><li>model registry with version history + approval gating</li><li>model monitoring on features, skew, and prediction drift</li><li>alerting on drift thresholds</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>gcloud ai models update MODEL_ID --enable-feature-monitoring
</span></span></code></pre></td></tr></table></div></div><p>Logs land in Cloud Monitoring / AI Platform metrics.</p><h2 id=-step-8--continuous-retraining>ğŸ”„ step 8 â€“ continuous retraining</h2><p>Use BigQuery event subscription + Cloud Function:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>on_bqml_job</span><span class=p>(</span><span class=n>event</span><span class=p>,</span> <span class=n>context</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=n>event</span><span class=p>[</span><span class=s1>&#39;state&#39;</span><span class=p>]</span> <span class=o>==</span> <span class=s1>&#39;DONE&#39;</span> <span class=ow>and</span> <span class=s1>&#39;product_demand_xgb&#39;</span> <span class=ow>in</span> <span class=n>event</span><span class=p>[</span><span class=s1>&#39;jobName&#39;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>    <span class=n>pipelines</span><span class=o>.</span><span class=n>create_run</span><span class=p>(</span><span class=o>...</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>Automated retraining whenever performance dips or new data arrives.</p><h2 id=-pro-tips--gotchas>ğŸ’¡ pro tips & gotchas</h2><ul><li>Use ARIMA_PLUS for time-series forecasting inside BQML</li><li>Keep your monthly partitions clean â€“ bqml is picky</li><li>Watch bqml quotas (1 TB/time)</li><li>GPU training is optionalâ€”unless youâ€™ve got heavy ANN models</li></ul><p>â¸»</p><h2 id=-business-impact-snapshot>ğŸ’¼ business impact snapshot</h2><ul><li>time-to-model went from 4â€“6 weeks to 2 hours</li><li>infra cost dropped 60% vs self-managed clusters</li><li>stakeholders loved self-serve SQL model training</li></ul><p>â¸»</p><h2 id=-future-directions>ğŸ§  future directions</h2><ul><li>move to generative AI via REMOTE_MODEL in BigQuery ML</li><li>scale pipelines with Agentspace automation (Next 2025)</li><li>integrate LLM embeddings into Vertex similarity search</li></ul><p>â¸»</p><p>ğŸ“£ closing notes</p><p>BigQuery ML + Vertex AI = an end-to-end, cloud-native AI platform that skips ETL, standardizes pipelines, and scales effortlessly.</p><p>Witty? Maybe. Practical? Definitely. Letâ€™s stop moving data and start making decisions.</p><p>â¸»</p><p>Curious for a demo or want the full code for enterprises? Drop me a line at <a href=mailto:vitthalmirji@gmail.com>vitthalmirji@gmail.com</a>
.</p></div><nav class="hide-on-mobile section-nav"><nav id=TableOfContents><ol><li><a href=#-why-cloud-native-ai-workflows-matter>ğŸš€ Why cloud-native ai workflows matter</a></li><li><a href=#-end-to-end-architecture>ğŸ§© end-to-end architecture</a></li><li><a href=#-step-1--sql-first-feature-engineering-in-bigquery>ğŸ§¼ step 1 â€“ sql-first feature engineering in bigquery</a></li><li><a href=#-step-2--model-training-entirely-in-data-warehouse>ğŸ¯ step 2 â€“ model training entirely in data warehouse</a></li><li><a href=#-step-3--register--deploy-with-vertex-ai>ğŸ§  step 3 â€“ register & deploy with vertex ai</a></li><li><a href=#-step-4--real-time-inference-api>âš¡ step 4 â€“ real-time inference api</a></li><li><a href=#-step-5--batch-predictions--retraining-pipelines>ğŸ” step 5 â€“ batch predictions + retraining pipelines</a></li><li><a href=#-step-6--feature-store-sync>ğŸ§° step 6 â€“ feature store sync</a></li><li><a href=#-step-7--monitoring--drift-detection>ğŸ“ˆ step 7 â€“ monitoring & drift detection</a></li><li><a href=#-step-8--continuous-retraining>ğŸ”„ step 8 â€“ continuous retraining</a></li><li><a href=#-pro-tips--gotchas>ğŸ’¡ pro tips & gotchas</a></li><li><a href=#-business-impact-snapshot>ğŸ’¼ business impact snapshot</a></li><li><a href=#-future-directions>ğŸ§  future directions</a></li></ol></nav></nav></div><div class=post><hr class=footer-separator><div class=tags><ul class=flat><li class=tag-li><a href=../../../tags/cloud-native>cloud-native</a></li><li class=tag-li><a href=../../../tags/ai-workflows>AI workflows</a></li><li class=tag-li><a href=../../../tags/vertex-ai>Vertex AI</a></li><li class=tag-li><a href=../../../tags/bigquery-ml>BigQuery ML</a></li><li class=tag-li><a href=../../../tags/real-time-inference>real-time inference</a></li><li class=tag-li><a href=../../../tags/mlops>MLOps</a></li><li class=tag-li><a href=../../../tags/feature-store>feature store</a></li><li class=tag-li><a href=../../../tags/monitoring>monitoring</a></li><li class=tag-li><a href=../../../tags/pipelines>pipelines</a></li><li class=tag-li><a href=../../../tags/batch-prediction>batch prediction</a></li><li class=tag-li><a href=../../../tags/model-registry>model registry</a></li><li class=tag-li><a href=../../../tags/data-engineering>data engineering</a></li><li class=tag-li><a href=../../../tags/sql-first>SQL-first</a></li><li class=tag-li><a href=../../../tags/cloud-native-ai>cloud-native AI</a></li></ul></div><div class=back><a href=https://github.com/vim89/vitthalmirji.com/blob/master/content/posts/2025/05/cloud-native-ai-workflows/index.md title=github><i data-feather=github></i> Edit this on GitHub</a></div><div class=back><a href=https://vitthalmirji.com/><span aria-hidden=true>â† Back</span></a></div><div class=back>Next time, we'll talk about <i>"What Tiger King can teach us about x86 Assembly"</i></div></div></div><div class="footer wrapper"><nav class=nav><div>2025 Â© Copyright notice</div></nav></div><script>feather.replace()</script><script type=module>
	import mermaid from "https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs";

	const getMermaidTheme = () => {
		const savedScheme = localStorage.getItem('scheme');
		if (savedScheme) {
			return savedScheme === 'dark' ? 'dark' : 'default';
		}
		return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'default';
	};

	mermaid.initialize({
		startOnLoad: true,
		theme: getMermaidTheme()
	});

	const applyTheme = () => {
		const newTheme = getMermaidTheme();
		mermaid.initialize({
			startOnLoad: true,
			theme: newTheme
		});
	};

	window.addEventListener('storage', (event) => {
		if (event.key === 'scheme') {
			applyTheme();
		}
	});

	window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', applyTheme);
</script><script>document.querySelectorAll("pre code").forEach(e=>{const t=document.createElement("button");t.innerText="ğŸ“‹",t.onclick=()=>{navigator.clipboard.writeText(e.innerText),t.innerText="âœ…",setTimeout(()=>t.innerText="ğŸ“‹",2e3)},e.parentElement.style.position="relative",t.style.position="absolute",t.style.top="8px",t.style.right="8px",e.parentElement.appendChild(t)})</script><script>var enableTruncate=!0,filterDepth=!1;const MAX_DEPTH=9;window.addEventListener("DOMContentLoaded",()=>{const e=new IntersectionObserver(e=>{e.reverse().forEach(e=>{const n=e.target.getAttribute("id");if(e.intersectionRatio>0){var t=document.querySelectorAll(`nav li a[href="#${n}"]`);t!=null&&t.forEach(e=>{if(e!=null){var t=getDepth(e.parentElement);filterDepth&&t<=MAX_DEPTH&&(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))}else filterDepth||(clearActiveStatesInTableOfContents(),e.parentElement.classList.add("active"))})}})});document.querySelectorAll("h1[id],h2[id],h3[id],h4[id]").forEach(t=>{e.observe(t)})});function isVisible(e){if(!(e instanceof Element))return!1;const n=getComputedStyle(e);if(n.display==="none")return!1;if(n.visibility!=="visible")return!1;if(n.opacity<.1)return!1;if(e.offsetWidth+e.offsetHeight+e.getBoundingClientRect().height+e.getBoundingClientRect().width===0)return!1;const t={x:e.getBoundingClientRect().left+e.offsetWidth/2,y:e.getBoundingClientRect().top+e.offsetHeight/2};if(t.x<0)return!1;if(t.x>(document.documentElement.clientWidth||window.innerWidth))return!1;if(t.y<0)return!1;if(t.y>(document.documentElement.clientHeight||window.innerHeight))return!1;let s=document.elementFromPoint(t.x,t.y);do if(s===e)return!0;while(s=s.parentNode)return!1}function clearActiveStatesInTableOfContents(){document.querySelectorAll("nav li").forEach(e=>{e.classList.remove("active")})}function getDepth(e){for(var t=0;e!==null&&e.tagName.toLowerCase()!=="ul";)t++,e=e.parentElement;return t}function navItems(){var e=document.querySelectorAll("nav nav li a");return Array.from(e).filter(e=>e.href!=null&&e.hash.startsWith("#"))}function lasItemInNavBarVisible(){var e=navItems().slice(-1)[0];return isVisible(e)}document.addEventListener("DOMContentLoaded",function(){if(!enableTruncate)return;var e=navItems();console.log(e),lasItemInNavBarVisible()||(filterDepth=!0,e.forEach(function(e){var t=getDepth(e.parentElement);t>MAX_DEPTH&&e.parentElement.classList.add("depth-nested")}))})</script></body></html>